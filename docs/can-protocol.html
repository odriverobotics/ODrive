


<!DOCTYPE html>
<!-- source: https://github.com/pages-themes/minimal/blob/master/_layouts/default.html -->
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>CAN Protocol | ODrive</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="CAN Protocol" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="High performance motor control" />
<meta property="og:description" content="High performance motor control" />
<meta property="og:site_name" content="ODrive" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CAN Protocol" />
<script type="application/ld+json">
{"headline":"CAN Protocol","description":"High performance motor control","url":"/can-protocol.html","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=1884d15497a7763c369624915a3b9adc24cd6eb7">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <div>
          <h1><a href="/">ODrive Documentation</a></h1>

          

          <p>High performance motor control</p>
        </div>
        <div style="overflow-y: auto;">
          <ul id="navbar">
            
            <li class="navgroup">
              <p class="navheader">General</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/" alt="Getting Started">Getting Started</a></li>
                
                
                
                
                <li><a class="navitem" href="/odrivetool" alt="ODrive Tool">ODrive Tool</a></li>
                
                
                
                
                <li><a class="navitem" href="/control-modes" alt="Control Modes">Control Modes</a></li>
                
                
                
                
                <li><a class="navitem" href="/commands" alt="Parameters & Commands">Parameters & Commands</a></li>
                
                
                
                
                <li><a class="navitem" href="/encoders" alt="Encoders">Encoders</a></li>
                
                
                
                
                <li><a class="navitem" href="/control" alt="Control Structure & Tuning">Control Structure & Tuning</a></li>
                
                
                
                
                <li><a class="navitem" href="/troubleshooting" alt="Troubleshooting">Troubleshooting</a></li>
                
                
                
                
                <li><a class="navitem" href="/specifications" alt="Specifications">Specifications</a></li>
                
                
                
                
                <li><a class="navitem" href="/ground-loops" alt="Ground Loops">Ground Loops</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Tutorials</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/hoverboard" alt="Hoverboard Guide">Hoverboard Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="/migration" alt="Migration Guide">Migration Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="/can-guide" alt="CAN Guide">CAN Guide</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Interfaces & Protocols</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/pinout" alt="Pinout">Pinout</a></li>
                
                
                
                
                <li><a class="navitem" href="/usb" alt="USB">USB</a></li>
                
                
                
                
                <li><a class="navitem" href="/uart" alt="UART">UART</a></li>
                
                
                
                
                <li><a class="navitem" href="/native-protocol" alt="Native Protocol">Native Protocol</a></li>
                
                
                
                
                <li><a class="navitem" href="/ascii-protocol" alt="ASCII Protocol">ASCII Protocol</a></li>
                
                
                
                
                <li><a class="navitem currentitem" href="/can-protocol" alt="CAN Protocol">CAN Protocol</a></li>
                
                
                
                
                <li><a class="navitem" href="/step-direction" alt="Step & Direction">Step & Direction</a></li>
                
                
                
                
                <li><a class="navitem" href="/rc-pwm" alt="RC PWM">RC PWM</a></li>
                
                
                
                
                <li><a class="navitem" href="/analog-input" alt="Analog Input">Analog Input</a></li>
                
                
                
                
                <li><a class="navitem" href="/endstops" alt="Homing & Endstops">Homing & Endstops</a></li>
                
                
                
                
                <li><a class="navitem" href="/thermistors" alt="Thermistors">Thermistors</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">API Reference</p>
              <ul>
                
                


<li>

  <input id="chk-ODrive" type="checkbox"  hidden />
  <p class="navitem">
    
    <label style="margin-left: 0px;" for="chk-ODrive" class="chevron"></label>
    <a href="/api/odrive">ODrive</a>
  </p>
  <ul class="expandable-list">

    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.config">Config</a>
      </p>
    </li>
    <li>
    
      <input id="chk-ODrive.Can" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Can" class="chevron"></label>
        <a href="/api/odrive.can">Can</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.can.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.can.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.can.protocol">Protocol</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.endpoint">Endpoint</a>
      </p>
    </li>
    <li>
    
      <input id="chk-ODrive.Axis" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Axis" class="chevron"></label>
        <a href="/api/odrive.axis">Axis</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.lockinconfig">LockinConfig</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.canconfig">CanConfig</a>
          </p>
        </li>
        <li>
        
          <input id="chk-ODrive.Axis.Config" type="checkbox"  hidden />
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <label style="margin-left: 0px;" for="chk-ODrive.Axis.Config" class="chevron"></label>
            <a href="/api/odrive.axis.config">Config</a>
          </p>
          <ul class="expandable-list">

            <li>
              <p class="navitem">
                <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
                <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
                <a href="/api/odrive.axis.config.calibrationlockin">CalibrationLockin</a>
              </p>
            </li>

          </ul>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.tasktimes">TaskTimes</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.axisstate">AxisState</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.thermistorcurrentlimiter">ThermistorCurrentLimiter</a>
      </p>
    </li>
    <li>
    
      <input id="chk-ODrive.OnboardThermistorCurrentLimiter" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.OnboardThermistorCurrentLimiter" class="chevron"></label>
        <a href="/api/odrive.onboardthermistorcurrentlimiter">OnboardThermistorCurrentLimiter</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.onboardthermistorcurrentlimiter.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.OffboardThermistorCurrentLimiter" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.OffboardThermistorCurrentLimiter" class="chevron"></label>
        <a href="/api/odrive.offboardthermistorcurrentlimiter">OffboardThermistorCurrentLimiter</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.offboardthermistorcurrentlimiter.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Motor" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Motor" class="chevron"></label>
        <a href="/api/odrive.motor">Motor</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.currentcontrol">CurrentControl</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.motortype">MotorType</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.oscilloscope">Oscilloscope</a>
      </p>
    </li>
    <li>
    
      <input id="chk-ODrive.AcimEstimator" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.AcimEstimator" class="chevron"></label>
        <a href="/api/odrive.acimestimator">AcimEstimator</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.acimestimator.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Controller" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Controller" class="chevron"></label>
        <a href="/api/odrive.controller">Controller</a>
      </p>
      <ul class="expandable-list">

        <li>
        
          <input id="chk-ODrive.Controller.Config" type="checkbox"  hidden />
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <label style="margin-left: 0px;" for="chk-ODrive.Controller.Config" class="chevron"></label>
            <a href="/api/odrive.controller.config">Config</a>
          </p>
          <ul class="expandable-list">

            <li>
              <p class="navitem">
                <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
                <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
                <a href="/api/odrive.controller.config.anticogging">Anticogging</a>
              </p>
            </li>

          </ul>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.autotuning">Autotuning</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.controlmode">ControlMode</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.inputmode">InputMode</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Encoder" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Encoder" class="chevron"></label>
        <a href="/api/odrive.encoder">Encoder</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.encoder.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.encoder.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.encoder.mode">Mode</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.SensorlessEstimator" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.SensorlessEstimator" class="chevron"></label>
        <a href="/api/odrive.sensorlessestimator">SensorlessEstimator</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.sensorlessestimator.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.sensorlessestimator.error">Error</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.TrapezoidalTrajectory" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.TrapezoidalTrajectory" class="chevron"></label>
        <a href="/api/odrive.trapezoidaltrajectory">TrapezoidalTrajectory</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.trapezoidaltrajectory.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Endstop" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Endstop" class="chevron"></label>
        <a href="/api/odrive.endstop">Endstop</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.endstop.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.MechanicalBrake" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.MechanicalBrake" class="chevron"></label>
        <a href="/api/odrive.mechanicalbrake">MechanicalBrake</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.mechanicalbrake.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.tasktimer">TaskTimer</a>
      </p>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.tasktimes">TaskTimes</a>
      </p>
    </li>
    <li>
    
      <input id="chk-ODrive.SystemStats" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.SystemStats" class="chevron"></label>
        <a href="/api/odrive.systemstats">SystemStats</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.systemstats.usb">Usb</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.systemstats.i2c">I2C</a>
          </p>
        </li>

      </ul>
    </li>

    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.error">Error</a>
      </p>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.gpiomode">GpioMode</a>
      </p>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.streamprotocoltype">StreamProtocolType</a>
      </p>
    </li>
  </ul>
</li>
<li>

  <input id="chk-ODrive3" type="checkbox"  hidden />
  <p class="navitem">
    
    <label style="margin-left: 0px;" for="chk-ODrive3" class="chevron"></label>
    <a href="/api/odrive3">ODrive3</a>
  </p>
  <ul class="expandable-list">

    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive3.config">Config</a>
      </p>
    </li>

  </ul>
</li>
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">For ODrive Developers</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/developer-guide" alt="Firmware Developer Guide">Firmware Developer Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="/configuring-vscode" alt="Configuring Visual Studio Code">Configuring Visual Studio Code</a></li>
                
                
                
                
                <li><a class="navitem" href="/configuring-eclipse" alt="Configuring Eclipse">Configuring Eclipse</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Component Guides</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="https://docs.google.com/spreadsheets/d/12vzz7XVEK6YNIOqH0jAz51F5VUpc-lJEs3mmkWP1H4Y" alt="Motor Guide">Motor Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="https://docs.google.com/spreadsheets/d/1OBDwYrBb5zUPZLrhL98ezZbg94tUsZcdTuwiVNgVqpU" alt="Encoder Guide">Encoder Guide</a></li>
                
                
              </ul>
            </li>
            
          </ul>
        </div>
        <div style="margin-top: 10px;">
          
          <p class="view"><a href="https://github.com/odriverobotics/ODrive">View the Project on GitHub <small>odriverobotics/ODrive</small></a></p>
          

          
          
          <p>Help improve these docs: submit edits using the link in the top right.</p>
          <p>If you need help, please search or ask the <a href=https://discourse.odriverobotics.com>ODrive Community</a>.</p>

          
        </div>
      </header>
      <section>

        <div class="pageactions">
          <div>
            <!-- edit icon taken from GitHub -->
            <svg transform="translate(0,1)" class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="10" height="12" aria-hidden="true">
              <path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"></path>
            </svg>
            
            <a href="https://www.github.com/madcowswe/ODrive/edit/master/docs/can-protocol.md">edit on GitHub</a>
          </div>

          
        </div>


      <h1 id="can-protocol">CAN Protocol</h1>

<p>This document describes the CAN Protocol.  For examples of usage, check out our <a href="/can-guide.html">CAN Guide!</a></p>

<hr />
<h2 id="configuring-odrive-for-can">Configuring ODrive for CAN</h2>
<p>Configuration of the CAN parameters should be done via USB before putting the device on the bus.</p>

<p>To set the desired baud rate, use <code class="language-plaintext highlighter-rouge">&lt;odrv&gt;.can.config.baud_rate = &lt;value&gt;</code>.</p>

<p>Each axis looks like a separate node on the bus. Thus, they both have the two properties <code class="language-plaintext highlighter-rouge">can_node_id</code> and <code class="language-plaintext highlighter-rouge">can_node_id_extended</code>. The node ID can be from 0 to 63 (0x3F) inclusive, or, if extended CAN IDs are used, from 0 to 16777215 (0xFFFFFF). If you want to connect more than one ODrive on a CAN bus, you must set different node IDs for the second ODrive or they will conflict and crash the bus.</p>

<h3 id="example-configuration">Example Configuration</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>odrv0.axis0.config.can_node_id = 3
odrv0.axis1.config.can_node_id = 1
odrv0.can.config.baud_rate = 500000
odrv0.save_configuration()
odrv0.reboot()
</code></pre></div></div>

<hr />
<h2 id="transport-protocol">Transport Protocol</h2>
<p>We’ve implemented a very basic CAN protocol that we call “CAN Simple” to get users going with ODrive.  This protocol is sufficiently abstracted that it is straightforward to add other protocols such as CANOpen, J1939, or Fibre over ISO-TP in the future.  Unfortunately, implementing those protocols is a lot of work, and we wanted to give users a way to control ODrive’s basic functions via CAN sooner rather than later.</p>

<h3 id="can-frame">CAN Frame</h3>
<p>At its most basic, the CAN Simple frame looks like this:</p>

<ul>
  <li>Upper 6 bits - Node ID - max 0x3F (or 0xFFFFFF when using extended CAN IDs)</li>
  <li>Lower 5 bits - Command ID - max 0x1F</li>
</ul>

<p>To understand how the Node ID and Command ID interact, let’s look at an example</p>

<p>The 11-bit Arbitration ID is setup as follows:</p>

<p><code class="language-plaintext highlighter-rouge">can_id = axis_id &lt;&lt; 5 | cmd_id</code></p>

<p>For example, an Axis ID of <code class="language-plaintext highlighter-rouge">0x01</code> with a command of <code class="language-plaintext highlighter-rouge">0x0C</code> would be result in <code class="language-plaintext highlighter-rouge">0x2C</code>:</p>

<p><code class="language-plaintext highlighter-rouge">0x01 &lt;&lt; 5 | 0x0C = 0x2C</code></p>

<h3 id="messages">Messages</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: right">CMD ID</th>
      <th style="text-align: left">Name</th>
      <th style="text-align: left">Sender</th>
      <th style="text-align: left">Signals</th>
      <th style="text-align: left">Start byte</th>
      <th style="text-align: left">Signal Type</th>
      <th style="text-align: left">Bits</th>
      <th style="text-align: left">Factor</th>
      <th style="text-align: left">Offset</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">0x000</td>
      <td style="text-align: left">CANOpen NMT Message**</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
    </tr>
    <tr>
      <td style="text-align: right">0x001</td>
      <td style="text-align: left">ODrive Heartbeat Message</td>
      <td style="text-align: left">Axis</td>
      <td style="text-align: left">Axis Error<br />Axis Current State<br />Controller Status</td>
      <td style="text-align: left">0<br />4<br />7</td>
      <td style="text-align: left">Unsigned Int<br />Unsigned Int<br />Bitfield</td>
      <td style="text-align: left">32<br />8<br />8</td>
      <td style="text-align: left">-<br />-<br />-</td>
      <td style="text-align: left">-<br />-<br />-</td>
    </tr>
    <tr>
      <td style="text-align: right">0x002</td>
      <td style="text-align: left">ODrive Estop Message</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
    </tr>
    <tr>
      <td style="text-align: right">0x003</td>
      <td style="text-align: left">Get Motor Error*</td>
      <td style="text-align: left">Axis</td>
      <td style="text-align: left">Motor Error</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">Unsigned Int</td>
      <td style="text-align: left">64</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x004</td>
      <td style="text-align: left">Get Encoder Error*</td>
      <td style="text-align: left">Axis</td>
      <td style="text-align: left">Encoder Error</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">Unsigned Int</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x005</td>
      <td style="text-align: left">Get Sensorless Error*</td>
      <td style="text-align: left">Axis</td>
      <td style="text-align: left">Sensorless Error</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">Unsigned Int</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x006</td>
      <td style="text-align: left">Set Axis Node ID</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Axis CAN Node ID</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">Unsigned Int</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x007</td>
      <td style="text-align: left">Set Axis Requested State</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Axis Requested State</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">Unsigned Int</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x008</td>
      <td style="text-align: left">Set Axis Startup Config</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">- Not yet implemented -</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
    </tr>
    <tr>
      <td style="text-align: right">0x009</td>
      <td style="text-align: left">Get Encoder Estimates*</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Encoder Pos Estimate<br />Encoder Vel Estimate</td>
      <td style="text-align: left">0<br />4</td>
      <td style="text-align: left">IEEE 754 Float<br />IEEE 754 Float</td>
      <td style="text-align: left">32<br />32</td>
      <td style="text-align: left">1<br />1</td>
      <td style="text-align: left">0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x00A</td>
      <td style="text-align: left">Get Encoder Count*</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Encoder Shadow Count<br />Encoder Count in CPR</td>
      <td style="text-align: left">0<br />4</td>
      <td style="text-align: left">Signed Int<br />Signed Int</td>
      <td style="text-align: left">32<br />32</td>
      <td style="text-align: left">1<br />1</td>
      <td style="text-align: left">0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x00B</td>
      <td style="text-align: left">Set Controller Modes</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Control Mode<br />Input Mode</td>
      <td style="text-align: left">0<br />4</td>
      <td style="text-align: left">Signed Int<br />Signed Int</td>
      <td style="text-align: left">32<br />32</td>
      <td style="text-align: left">1<br />1</td>
      <td style="text-align: left">0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x00C</td>
      <td style="text-align: left">Set Input Pos</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Input Pos<br />Vel FF<br />Torque FF</td>
      <td style="text-align: left">0<br />4<br />6</td>
      <td style="text-align: left">IEEE 754 Float<br />Signed Int<br />Signed Int</td>
      <td style="text-align: left">32<br />16<br />16</td>
      <td style="text-align: left">1<br />0.001<br />0.001</td>
      <td style="text-align: left">0<br />0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x00D</td>
      <td style="text-align: left">Set Input Vel</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Input Vel<br />Torque FF</td>
      <td style="text-align: left">0<br />4</td>
      <td style="text-align: left">IEEE 754 Float<br />IEEE 754 Float</td>
      <td style="text-align: left">32<br />32</td>
      <td style="text-align: left">1<br />1</td>
      <td style="text-align: left">0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x00E</td>
      <td style="text-align: left">Set Input Torque</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Input Torque</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">IEEE 754 Float</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x00F</td>
      <td style="text-align: left">Set Limits</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Velocity Limit<br />Current Limit</td>
      <td style="text-align: left">0<br />4</td>
      <td style="text-align: left">IEEE 754 Float<br />IEEE 754 Float</td>
      <td style="text-align: left">32<br /></td>
      <td style="text-align: left">1<br />1</td>
      <td style="text-align: left">0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x010</td>
      <td style="text-align: left">Start Anticogging</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
    </tr>
    <tr>
      <td style="text-align: right">0x011</td>
      <td style="text-align: left">Set Traj Vel Limit</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Traj Vel Limit</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">IEEE 754 Float</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x012</td>
      <td style="text-align: left">Set Traj Accel Limits</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Traj Accel Limit<br />Traj Decel Limit</td>
      <td style="text-align: left">0<br />4</td>
      <td style="text-align: left">IEEE 754 Float<br />IEEE 754 Float</td>
      <td style="text-align: left">32<br />32</td>
      <td style="text-align: left">1<br />1</td>
      <td style="text-align: left">0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x013</td>
      <td style="text-align: left">Set Traj Inertia</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Traj Inertia</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">IEEE 754 Float</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x014</td>
      <td style="text-align: left">Get IQ*</td>
      <td style="text-align: left">Axis</td>
      <td style="text-align: left">Iq Setpoint<br />Iq Measured</td>
      <td style="text-align: left">0<br />4</td>
      <td style="text-align: left">IEEE 754 Float<br />IEEE 754 Float</td>
      <td style="text-align: left">32<br />32</td>
      <td style="text-align: left">1<br />1</td>
      <td style="text-align: left">0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x015</td>
      <td style="text-align: left">Get Sensorless Estimates*</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Sensorless Pos Estimate<br />Sensorless Vel Estimate</td>
      <td style="text-align: left">0<br />4</td>
      <td style="text-align: left">IEEE 754 Float<br />IEEE 754 Float</td>
      <td style="text-align: left">32<br />32</td>
      <td style="text-align: left">1<br />1</td>
      <td style="text-align: left">0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x016</td>
      <td style="text-align: left">Reboot ODrive</td>
      <td style="text-align: left">Master***</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
    </tr>
    <tr>
      <td style="text-align: right">0x017</td>
      <td style="text-align: left">Get Vbus Voltage</td>
      <td style="text-align: left">Master***</td>
      <td style="text-align: left">Vbus Voltage</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">IEEE 754 Float</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x018</td>
      <td style="text-align: left">Clear Errors</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
    </tr>
    <tr>
      <td style="text-align: right">0x019</td>
      <td style="text-align: left">Set Linear Count</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Position</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">Signed Int</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x01A</td>
      <td style="text-align: left">Set Position Gain</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Pos Gain</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left">IEEE 754 Float</td>
      <td style="text-align: left">32</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left">0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x01B</td>
      <td style="text-align: left">Set Vel Gains</td>
      <td style="text-align: left">Master</td>
      <td style="text-align: left">Vel Gain<br />Vel Integrator Gain</td>
      <td style="text-align: left">0<br />4</td>
      <td style="text-align: left">IEEE 754 Float<br />IEEE 754 Float</td>
      <td style="text-align: left">32<br />32</td>
      <td style="text-align: left">1<br />1</td>
      <td style="text-align: left">0<br />0</td>
    </tr>
    <tr>
      <td style="text-align: right">0x700</td>
      <td style="text-align: left">CANOpen Heartbeat Message**</td>
      <td style="text-align: left">Slave</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
      <td style="text-align: left">-</td>
    </tr>
  </tbody>
</table>

<p>All multibyte values are little endian (aka Intel format, aka least significant byte first).</p>

<p>* Note: These messages are call &amp; response.  The Master node sends a message with the RTR bit set, and the axis responds with the same ID and specified payload.<br />
** Note:  These CANOpen messages are reserved to avoid bus collisions with CANOpen devices.  They are not used by CAN Simple.<br />
*** Note:  These messages can be sent to either address on a given ODrive board.</p>

<hr />

<h3 id="cyclic-messages">Cyclic Messages</h3>
<p>Cyclic messages are sent by ODrive on a timer without a request. As of <code class="language-plaintext highlighter-rouge">fw0.5.4</code>, the Cyclic messsages are:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">ID</th>
      <th style="text-align: left">Name</th>
      <th style="text-align: left">Rate (ms)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">0x001</td>
      <td style="text-align: left">ODrive Heartbeat Message</td>
      <td style="text-align: left">100</td>
    </tr>
    <tr>
      <td style="text-align: right">0x009</td>
      <td style="text-align: left">Encoder Estimates</td>
      <td style="text-align: left">10</td>
    </tr>
  </tbody>
</table>

<p>These can be configured for each axis, see e.g. <code class="language-plaintext highlighter-rouge">axis.config.can</code>.</p>

<hr />

<h3 id="interoperability-with-canopen">Interoperability with CANopen</h3>
<p>You can deconflict with CANopen like this:</p>

<p><code class="language-plaintext highlighter-rouge">odrv0.axis0.config.can.node_id = 0x010</code> - Reserves messages 0x200 through 0x21F<br />
<code class="language-plaintext highlighter-rouge">odrv0.axis1.config.can.node_id = 0x018</code> - Reserves messages 0x300 through 0x31F</p>

<p>It may not be obvious, but this allows for some compatibility with CANOpen.  Although the address space 0x200 and 0x300 correspond to receive PDO base addresses, we can guarantee they will not conflict if all CANopen node IDs are &gt;= 32.  E.g.:</p>

<p>CANopen nodeID = 35 = 0x23
Receive PDO 0x200 + nodeID = 0x223, which does not conflict with the range [0x200 : 0x21F]</p>

<p>Be careful that you don’t assign too many nodeIDs per PDO group.  Four CAN Simple nodes (32*4) is all of the available address space of a single PDO.  If the bus is strictly ODrive CAN Simple nodes, a simple sequential Node ID assignment will work fine.</p>



      </section>
      <!--<footer>
        
        <p>This project is maintained by <a href="https://github.com/odriverobotics">odriverobotics</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>-->
    </div>
    <script src="/assets/js/scale.fix.js"></script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-93396600-3', 'auto');
      ga('send', 'pageview');
    </script>
    
    <script type="text/javascript">
      // Rewrite all links that start with "../" to point to the GitHub repo
      window.onload = function(){
        var links = document.links;
        var i = links.length;
        while (i--) {
          if (links[i].getAttribute("href").slice(0, 3) == "../") {
            links[i].href = "https://github.com/madcowswe/ODrive/blob/master/" + links[i].getAttribute("href").slice(3);
          }
          if (links[i].getAttribute("href").slice(0, 15) == "getting-started") {
            links[i].href = "/" + links[i].getAttribute("href").slice(15);
          }
        }
      }
    </script>
    <script>
      // Scroll the navbar to the position of the selected item
      var element = document.getElementsByClassName("currentitem")[0];
      element.scrollIntoView(false);
    </script>
  </body>
</html>

